<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tamagucci</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.15/dist/tailwind.min.css" rel="stylesheet">


  <style>
 body {
     background-color: #1f2937;
     color: #f9fafb;
}
.bartext {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  text-align: center;
  line-height: 20px;
  color: white;
  border-color: #1f2937;
  font-size: small;
  

}
 .console {
     font-family: system-ui;
     background-color: #293342;
     color: #f9fafb;
     padding: 1rem;
     border-radius: 0.5rem;
     margin-top: 1rem;
     height: 280px;
}
 .console h2 {
     font-size: 1.5rem;
     font-weight: bold;
     margin-bottom: 0.5rem;
}
 .console ul {
     font-family: helvetica;
     list-style-type: none;
     margin: 0;
     padding: 0;
     max-height: 250px;
     overflow-y: auto;
}
 .console li {
     margin-bottom: 0.5rem;
}
/* Estilo para a scrollbar */
 .console ul::-webkit-scrollbar {
     width: 10px;
     border-radius: 12px;
}
 .console ul::-webkit-scrollbar-track {
     border-radius: 12px;
     background-color: #374151;
}
 .console ul::-webkit-scrollbar-thumb {
     background-color: #4b5563;
     border-radius: 12px;
}
 .console ul::-webkit-scrollbar-thumb:hover {
     background-color: #6b7280;
}
 .tooltip {
     position: relative;
     display: flexbox;
     cursor: pointer;
}
 .tooltip::before {
     display: block;
     content: attr(title);
     position: absolute;
     margin-bottom: 4px;
     bottom: 100%;
     left: 50%;
     transform: translateX(-50%);
     background-color: rgba(0, 0, 0, 0.8);
     color: #fff;
     padding: 10px 10px;
     width: max-content;
     border-radius: 4px;
     font-size: 14px;
     visibility: hidden;
     opacity: 0;
     transition: visibility 0s, opacity 0.3s;
}
 .tooltip:hover::before {
     visibility: visible;
     opacity: 1;
}
 .card {
     background-color: #374151;
     padding: 2rem;
     border-radius: 0.5rem;
     width: 700px;
     height: 400px;
}
 .progress-bar {
     height: 20px;
     border-radius: 20px;
     margin-top: 5px;
     margin-bottom: 10px;
}
 .emoji-box {
     margin-top: 20px;
     margin-bottom: 20px;
     padding-left: 10%;
     padding-right: 10%;
     border-radius: 8px;
     font-size:large;
     justify-content: center;
     align-items: center;
     display: flex;
     background-color: #293342;
}

  </style>   
</head>
<body>
    
      
  <div class="flex mx-auto p-4 space-x-2">
    
    <div class="card">
      <div class="flex justify-between">
        <div>
          <h1 class="text-3xl font-bold mb-2" id="petName"></h1>
          <h6 class="text-1xl mb-1" id="petAge"></h6>
          <h6 class="text-1xl mb-1" id="petEnergy"></h6>
          <h6 class="text-1xl mb-1" id="petSleeping"></h6>
          <h6 class="text-1xl mb-1" id="petWashing"></h6>
        </div>
        <img src="" alt="Tamagucci" id="petImage" class="w-40 h-40">
      </div>


      <div class="flex justify-between space-x-2">
        
        <div class="w-1/3">
          <h2 class="text-xl font-bold mb-2">Sa√∫de</h2>
          <div class="progress-bar bg-red-300 rounded-full relative">
            <div id="healthBar" class="h-full bg-red-600 rounded-full flex items-center justify-center">
                <span id= "healthBarText" class="bartext"></span>
            </div>
          </div>
        </div>
        
        <div class="w-1/3">
          <h2 class="text-xl font-bold mb-2">Fome</h2>
          <div class="progress-bar bg-yellow-300 rounded-full relative">
            <div id="hungerBar" class="h-full bg-yellow-600 rounded-full flex items-center justify-center">
                <span id= "hungerBarText" class="bartext"></span>
            </div>
          </div>
        </div>
        
        <div class="w-1/3">
          <h2 class="text-xl font-bold mb-2">Felicidade</h2>
          <div class="progress-bar bg-blue-300 rounded-full relative">
            <div id="happinessBar" class="h-full w-full bg-blue-600 rounded-full flex items-center justify-center">
                <span id="hapinessBarText" class="bartext"></span>         
            </div>
          </div>
        </div>
      </div>
      


      <div class="flex justify-center mt-4 space-x-2">
        <div class="tooltip" title="D√™ rem√©dio para recuperar sa√∫de."><button id="medicineButton" title="Rem√©dio" class="bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded cursor-pointer" disabled>Rem√©dio</button></div>
        <div class="tooltip" title="D√™ comida de emerg√™ncia."><button id="feedButton" title="Alimentar" class="bg-yellow-500 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded cursor-pointer" disabled>Alimentar</button></div>
        <div class="tooltip" title="Clique para brincar."><button id="playButton" title="Brincar" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded cursor-pointer" disabled>Brincar</button></div>
        <div class="tooltip" title="Clique para limpar."><button id="cleanButton" title="Limpar" class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded cursor-pointer" disabled>Limpar</button></div>
        <div class="tooltip" title="Clique para dormir por 3 dias."><button id="sleepButton" title="Dormir" class="bg-purple-500 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded cursor-pointer" disabled>Dormir</button></div>
        
      </div>
      <div class="flex justify-center mt-4">
        <div id="emoji" class="emoji-box text-4xl"></div>
      </div>
    </div>

    <div class="card">

        <h1 class="text-3xl font-bold mb-2">Jornal</h1>
        <div class="console">
          
          <ul id="consoleList"></ul>
        </div>
      </div>

  </div>

  <audio id="myAudio" src="http://github.com/Heromerom/games/raw/game-tamagucci/DiceGame.mp3" autoplay></audio>

  <script>
const pet = {
	nome: "Paimon",
	idade: 0,
	saude: 100,
	fome: 80,
	felicidade: 100,
	energia: 0,
	isSleeping: false,
	sujo: 0,
	"sleep-img-url": "https://stickerly.pstatic.net/sticker_pack/iYFODRyx2vbEYoLJDuA/C6L2EL/34/913b4ea6-c5cc-46e7-91d7-cd61f429f0ff.png",
	"happy-img-url": "https://mystickermania.com/cdn/stickers/genshin-impact/genshin-paimon-512x512.png",
	"sad-img-url": "https://64.media.tumblr.com/a6def43e95357d48c8f62c6900be704a/53828a39d1e162b1-a7/s500x750/e7caafa817b1f869adf0e24ab8856f4157ebe4bc.png",
	"neutral-img-url": "https://mystickermania.com/cdn/stickers/genshin-impact/genshin-paimon-512x512.png",
	"think-img-url": "https://s3.getstickerpack.com/storage/uploads/sticker-pack/genshin-paimon/sticker_16.png",
	"play-img-url": "https://i.redd.it/aoiyeqhhlvf81.gif"
};

const cleanlinessDescriptions = {
  0: 'üßº Limpa',
  1: 'üßº Mal-cheiro',
  2: 'üßº Dorme suja, acorda limpa',
  3: 'üßº Encardida',
};

const sleepingDescriptions = {
  true: 'üí§ Dormindo',
  false: 'üëÅÔ∏è Acordada'
};

// Frases aleat√≥rias da Paimon com base em seu estado
function getRandomPaimonPhrase() {
  const health = pet.saude;
  const hunger = pet.fome;
  const happiness = pet.felicidade;

  const phrases = [
    // Frases relacionadas √† sa√∫de
    { group: 'health', phrase: "Paimon n√£o est√° se sentindo bem...", probability: health < 40 ? 0.8 : 0 },
    { group: 'health', phrase: "Paimon precisa de cuidados m√©dicos.", probability: health < 40 ? 0.6 : 0 },
    { group: 'health', phrase: "Paimon est√° doente, preciso de ajuda!", probability: health < 40 ? 0.6 : 0 },
    { group: 'health', phrase: "Paimon est√° fraca e precisa se recuperar.", probability: health < 40 ? 0.6 : 0 },
    { group: 'health', phrase: "Paimon precisa de rem√©dios para melhorar.", probability: health < 40 ? 0.5 : 0 },
    { group: 'health', phrase: "Paimon quer ficar saud√°vel novamente!", probability: health < 40 ? 0.5 : 0 },
    { group: 'health', phrase: "Paimon precisa descansar e se recuperar.", probability: health < 40 ? 0.5 : 0 },
    { group: 'health', phrase: "Paimon est√° se sentindo um pouco melhor.", probability: health < 40 ? 0.2 : 0 },
    { group: 'health', phrase: "Paimon est√° um pouco mais forte agora.", probability: health < 40 ? 0.2 : 0 },
    { group: 'health', phrase: "Paimon est√° se recuperando.", probability: health < 40 ? 0.2 : 0 },

    // Frases relacionadas √† fome
    { group: 'hunger', phrase: "Paimon est√° com muita fome!", probability: hunger < 70 ? 0.8 : 0 },
    { group: 'hunger', phrase: "Paimon precisa urgentemente de comida!", probability: hunger < 70 ? 0.6 : 0 },
    { group: 'hunger', phrase: "Paimon est√° desmaiando de fome!", probability: hunger < 70 ? 0.6 : 0 },
    { group: 'hunger', phrase: "Paimon est√° com o est√¥mago roncando!", probability: hunger < 70 ? 0.5 : 0 },
    { group: 'hunger', phrase: "Paimon sente cheiro de comida... que del√≠cia!", probability: hunger < 70 ? 0.5 : 0 },
    { group: 'hunger', phrase: "Paimon est√° faminta como um tarsilho!", probability: hunger < 70 ? 0.5 : 0 },
    { group: 'hunger', phrase: "Paimon quer um lanche bem suculento!", probability: hunger < 70 ? 0.5 : 0 },
    { group: 'hunger', phrase: "Paimon adora um bom banquete!", probability: hunger < 70 ? 0.2 : 0 },
    { group: 'hunger', phrase: "Paimon devorou algo delicioso!", probability: hunger < 70 ? 0.2 : 0 },
    { group: 'hunger', phrase: "Paimon est√° satisfeita por enquanto.", probability: hunger < 70 ? 0.2 : 0 },

    // Frases relacionadas √† felicidade
    { group: 'happiness', phrase: "Paimon est√° muito triste...", probability: happiness < 30 ? 0.8 : 0 },
    { group: 'happiness', phrase: "Paimon n√£o consegue se animar...", probability: happiness < 30 ? 0.6 : 0 },
    { group: 'happiness', phrase: "Paimon precisa de carinho e aten√ß√£o...", probability: happiness < 30 ? 0.6 : 0 },
    { group: 'happiness', phrase: "Paimon est√° se sentindo solit√°ria...", probability: happiness < 30 ? 0.5 : 0 },
    { group: 'happiness', phrase: "Paimon quer brincar e se divertir!", probability: happiness < 30 ? 0.5 : 0 },
    { group: 'happiness', phrase: "Paimon precisa de um abra√ßo bem apertado!", probability: happiness < 30 ? 0.5 : 0 },
    { group: 'happiness', phrase: "Paimon quer explorar o mundo com voc√™!", probability: happiness < 30 ? 0.5 : 0 },
    { group: 'happiness', phrase: "Paimon adora momentos de alegria!", probability: happiness < 30 ? 0.2 : 0 },
    { group: 'happiness', phrase: "Paimon est√° se divertindo um pouco.", probability: happiness < 30 ? 0.2 : 0 },
    { group: 'happiness', phrase: "Paimon encontrou um motivo para sorrir.", probability: happiness < 30 ? 0.2 : 0 },

    // Frases neutras e curiosidades
    { group: 'neutral', phrase: "Ol√°, viajante! Como posso te ajudar hoje?", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon est√° pronta para aventuras!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon est√° aqui para te auxiliar!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon adora acompanhar seus passos!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon √© sua guia fiel e amiga!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon est√° ansiosa para explorar novos lugares!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon est√° curiosa para descobrir segredos escondidos!", probability: 0.2 },
    { group: 'neutral', phrase: "Voc√™ sabia que Paimon √© um esp√≠rito viajante?", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon adora comer ma√ß√£s!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon j√° explorou v√°rias regi√µes de Teyvat!", probability: 0.2 },
    { group: 'neutral', phrase: "Paimon adora hist√≥rias emocionantes!", probability: 0.2 },
    { group: 'neutral', phrase: "Voc√™ pode confiar em Paimon para te guiar!", probability: 0.2 }
  ];

  // Filtra as frases com base na probabilidade e grupo atual
  const filteredPhrases = phrases.filter(
    (phrase) => phrase.probability > 0 && phrase.group === 'health' && health < 40 ||
      phrase.probability > 0 && phrase.group === 'hunger' && hunger < 70 ||
      phrase.probability > 0 && phrase.group === 'happiness' && happiness < 30 ||
      phrase.probability > 0 && phrase.group === 'neutral'
  );

  // Seleciona uma frase aleat√≥ria das frases filtradas
  const randomPhrase = filteredPhrases[Math.floor(Math.random() * filteredPhrases.length)];

  return `<color = #00FFFF>üîµ <b>PAIMON:</b></color> ${randomPhrase.phrase}`;
}


function Paimon() {
    if (pet.saude > 0){
	addToConsole(getRandomPaimonPhrase());
}
}

// Cache de elementos DOM

const petNameElement = document.getElementById("petName");
const petAgeElement = document.getElementById("petAge");
const petEnergyElement = document.getElementById("petEnergy");
const petSleepingElement = document.getElementById("petSleeping");
const petWashingElement = document.getElementById("petWashing");
const petImageElement = document.getElementById("petImage");


const feedButton = document.getElementById("feedButton");
const playButton = document.getElementById("playButton");
const cleanButton = document.getElementById("cleanButton");
const sleepButton = document.getElementById("sleepButton");
const medicineButton = document.getElementById("medicineButton");
const emojiElement = document.getElementById("emoji");
const consoleListElement = document.getElementById("consoleList");
// Progress Bars
const healthBarElement = document.getElementById("healthBar");
const hungerBarElement = document.getElementById("hungerBar");
const happinessBarElement = document.getElementById("happinessBar");
const hungerBarText = document.getElementById("hungerBarText");
const hapinessBarText = document.getElementById("hapinessBarText");
const healthBarText = document.getElementById("healthBarText");





// Atualiza a interface do jogo
function updateGameInterface() {
    
    const petCleanliness = cleanlinessDescriptions[pet.sujo] || '';
    const petDormindo = sleepingDescriptions[pet.isSleeping] || '';

	petNameElement.textContent = pet.nome;
	petAgeElement.textContent = `üìÖ ${pet.idade} dias`;
	petEnergyElement.textContent = `‚ö° ${pet.energia}`;
	petSleepingElement.textContent = petDormindo ;
	petWashingElement.textContent = petCleanliness;
    petImageElement.src = getPetImage();
	healthBarElement.style.width = `${pet.saude}%`;
    hungerBarElement.style.width = `${pet.fome}%`;
	happinessBarElement.style.width = `${pet.felicidade}%`;
    healthBarText.textContent = `${pet.saude}%`;
    hungerBarText.textContent = `${pet.fome}%`;
    hapinessBarText.textContent = `${pet.felicidade}%`;



	updateButtons();
	showEmoji();
}

// Fun√ß√£o para adicionar uma mensagem ao console
function addToConsole(message) {
	const li = document.createElement("li");
	li.innerHTML = formatMessage(message);
	consoleListElement.appendChild(li);
	consoleListElement.scrollTop = consoleListElement.scrollHeight;
}

// Fun√ß√£o para formatar a mensagem com formata√ß√µes personalizadas
function formatMessage(message) {

	// Formata√ß√£o para ERRO
	message = message.replace(/<erro>(.*?)<\/erro>/g, "<color = #FF0000>[ERRO] $1</color>");
	// Formata√ß√£o para SUCESSO
	message = message.replace(/<sucesso>(.*?)<\/aviso>/g, "<color = #FF0000>[SUCESSO] $1</color>");
	// Formata√ß√£o para AVISO 
	message = message.replace(/<aviso>(.*?)<\/aviso>/g, "<color = #ffdb58>[AVISO] $1</color>");
	// Formata√ß√£o para negrito
	message = message.replace(/<b>(.*?)<\/b>/g, "<strong>$1</strong>");
	// Formata√ß√£o para it√°lico
	message = message.replace(/<i>(.*?)<\/i>/g, "<em>$1</em>");
	// Formata√ß√£o para sublinhado
	message = message.replace(/<s>(.*?)<\/s>/g, "<u>$1</u>");
	// Formata√ß√£o para cor
	message = message.replace(/<color = #([A-Fa-f0-9]{6})>(.*?)<\/color>/g, '<span style="color: #$1;">$2</span>');
	// Formata√ß√£o para texto se mexendo
	// message = message.replace(/<shake>(.*?)<\/shake>/g, '<span class="shake-animation">$1</span>');
	// Formata√ß√£o para links clic√°veis
	message = message.replace(/<url="(.*?)">(.*?)<\/url>/g, '<u><a href="$1">$2</a></u>');

	return message;
}

// Atualiza o estado dos bot√µes com base nas necessidades do Tamagucci
function updateButtons() {
	feedButton.disabled = pet.fome >= 100 || pet.saude <= 0;
	playButton.disabled = pet.felicidade >= 100 || pet.saude <= 0;
	cleanButton.disabled = pet.sujo === 0 || pet.saude <= 0;
	sleepButton.disabled = pet.isSleeping || pet.saude <= 0;
	medicineButton.disabled = pet.saude >= 100 || pet.saude <= 0;
}


// Obt√©m a URL da imagem com base no estado do Tamagucci
function getPetImage() {
	if (pet.isSleeping === true) {
		return pet["sleep-img-url"];
	} else if (pet.saude <= 50) {
		return pet["sad-img-url"];
	} else if (pet.felicidade <= 50) {
		return pet["neutral-img-url"];
	} else {
		return pet["happy-img-url"];
	}
}

// Mostra um emoji indicando as necessidades do Tamagucci
function showEmoji() {
	let emoji = "";
	if (pet.fome < 50) {
		//addToConsole(`<aviso>${pet.nome} est√° com fome.</aviso>`);
		emoji += "üçî";
	}
	if (pet.saude < 50) {
		//addToConsole(`<aviso>${pet.nome} est√° doente. </aviso>`);
		emoji += "üíä";
	}
	if (pet.felicidade < 50) {
		emoji += "üò¢";
		//addToConsole(`<aviso>${pet.nome} est√° infeliz.</aviso>`);
	}
	if (pet.sujo > 0) {
		emoji += "üßº";
	}
	if (emoji === "" && pet.saude >= 100) {
		emoji = " ";
	}
	emojiElement.textContent = emoji;
}

// A√ß√£o de alimentar o Tamagucci
function feed() {
	if (pet.fome < 100) {
		pet.fome += 20;
		pet.saude -= 10;
		pet.fome = Math.max(0, Math.min(pet.fome, 100));
		pet.saude = Math.max(0, Math.min(pet.saude, 100));
		updateGameInterface();
	} else {
		addToConsole(`<erro>N√£o est√° com fome.</erro>`)
	}
}

// A√ß√£o de brincar com o Tamagucci
function play() {
	if (pet.energia > 0) {
		pet.felicidade += 10;
		pet.energia -= 1;
		pet.felicidade = Math.max(0, Math.min(pet.felicidade, 100));
		pet.energia = Math.max(0, Math.min(pet.energia, 10));
		updateGameInterface();
	} else {
		addToConsole(`<erro>N√£o h√° energia suficiente.</erro>`)
	}
}

// A√ß√£o de limpar o Tamagucci
function clean() {
	if (pet.sujo > 0) {
		pet.sujo -= 1;
		pet.sujo = Math.max(0, pet.sujo);
		updateGameInterface();
	} else {
		addToConsole(`<aviso>N√£o est√° sujo.</aviso>`)
	}
}

// A√ß√£o de fazer o Tamagucci dormir
function sleep() {
	pet.isSleeping = true;

	pet.saude += 10;
	addToConsole(`<sucesso>${pet.nome} dormiu.</sucesso>`);
	pet.saude = Math.max(0, Math.min(pet.saude, 100));
	pet.fome = Math.max(0, Math.min(pet.fome, 100));
	updateGameInterface();
}

// A√ß√£o de dar rem√©dio ao Tamagucci
function giveMedicine() {
	pet.saude += 30;
	pet.felicidade -= 10;
	pet.saude = Math.max(0, Math.min(pet.saude, 100));
	pet.felicidade = Math.max(0, Math.min(pet.felicidade, 100));
	addToConsole(`<sucesso>Deu rem√©dio para ${pet.nome} e ganhou + 30 SAUDE e perdeu 10 FELICIDADE!</sucesso>`)
	updateGameInterface();

}

// Faz o Tamagucci evoluir a cada 10 dias
function evolve() {
	if (pet.idade % 10 === 0) {
		addToConsole(`${pet.nome} evoluiu!`)
		// L√≥gica para evolu√ß√£o
	}
}

// A√ß√£o de passar o dia e atualizar o estado do Tamagucci
function passDay() {
	if (pet.saude <= 0) {
		addToConsole(`${pet.nome} morreu! Fim de jogo!`);
		return;
	}

	pet.idade += 1;

	if (pet.isSleeping) {
		pet.fome -= 2;
		pet.saude += 2;
		pet.felicidade += 2;
		pet.sleeping = (pet.sleeping || 0) + 1;

		if (pet.sleeping > 3) {
			pet.isSleeping = false;
			pet.sleeping = 0;
			addToConsole(`${pet.nome} acordou!`);
		}
	} else {
		pet.fome -= 10;
		pet.saude -= 5;
		pet.felicidade -= 5;
	}
    // Opera√ß√µes
	pet.energia += pet.idade % 2 === 0 ? 1 : 0;
	pet.sujo += pet.idade % 2 === 0 ? 1 : 0;
    pet.saude -= pet.sujo * 3;

	pet.energia = Math.max(0, Math.min(pet.energia, 10));
	pet.sujo = Math.max(0, Math.min(pet.sujo, 3));
	pet.fome = Math.max(0, Math.min(pet.fome, 100));
	pet.saude = Math.max(0, Math.min(pet.saude, 100));
	pet.felicidade = Math.max(0, Math.min(pet.felicidade, 100));

	addToConsole(`<b>DIA ${pet.idade}:</b> fome ${pet.fome}, sa√∫de ${pet.saude}, felicidade ${pet.felicidade}, energia ${pet.energia}, sujo +1`);
	updateGameInterface();
	evolve();
}


// Adiciona os ouvintes de eventos aos bot√µes
feedButton.addEventListener("click", feed);
playButton.addEventListener("click", play);
cleanButton.addEventListener("click", clean);
sleepButton.addEventListener("click", sleep);
medicineButton.addEventListener("click", giveMedicine);

// Inicializa a interface do jogo
updateGameInterface();
document.addEventListener('DOMContentLoaded', () => {
	// Call the function to initialize tooltips
	addToConsole(`<b>Boas vindas!</b>`)
	passDay();
	setInterval(Paimon, 7000); // Executa a fun√ß√£o Paimon ap√≥s 5 segundos
	setInterval(passDay, 10000);
	var audio = document.getElementById("myAudio");
	audio.volume = 0.4;

	audio.addEventListener("ended", function() {
		audio.currentTime = 0; // Reinicia a reprodu√ß√£o para o in√≠cio
		audio.play(); // Inicia a reprodu√ß√£o novamente
	});
});

  </script>
  
  
 
</body>
</html>
